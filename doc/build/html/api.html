<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>InstrumentControl API &mdash; Lab Instrument Control and Automation Framework 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Lab Instrument Control and Automation Framework 1.0 documentation" href="index.html" />
    <link rel="next" title="Supported Instruments (Models)" href="supported_instruments.html" />
    <link rel="prev" title="Lab Instrument Control and Automation Framework" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="supported_instruments.html" title="Supported Instruments (Models)"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Lab Instrument Control and Automation Framework"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Lab Instrument Control and Automation Framework 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="instrumentcontrol-api">
<h1>InstrumentControl API<a class="headerlink" href="#instrumentcontrol-api" title="Permalink to this headline">¶</a></h1>
<p>The InstrumentControl API is the core of the Application GUI. It simplifies
script development by abstracting local and remote instruments as simple Python
objects and providing helper functions to handle all of the low-level
communication with <tt class="xref py py-class docutils literal"><span class="pre">InstrumentManager</span></tt> instances.</p>
<p>The InstrumentControl object is essentially a wrapper for InstrumentManager,
but simplifies the API by managing the communication to InstrumentManager
instances on multiple machines. All of the resources from all of the connected
InstrumentManager instances are cached locally and can be accessed using the
API as if they were all local objects.</p>
<p>InstrumentControl caches a local copy of information about resources from all
connected InstrumentManager instances. These cached resources are only updated
when the <tt class="xref py py-func docutils literal"><span class="pre">InstrumentControl.refreshManager()</span></tt> function is called. Resource
Identifiers (UUID) are generated by the InstrumentManager.</p>
<div class="section" id="importing-instrumentcontrol">
<h2>Importing InstrumentControl<a class="headerlink" href="#importing-instrumentcontrol" title="Permalink to this headline">¶</a></h2>
<p>To use the InstrumentControl API:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">InstrumentControl</span> <span class="kn">import</span> <span class="n">InstrumentControl</span>
<span class="n">instr</span> <span class="o">=</span> <span class="n">InstrumentControl</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To import InstrumentControl, the folder must be in your PYTHONPATH</p>
</div>
</div>
<div class="section" id="connecting-to-instrumentmanager-instances">
<h2>Connecting to InstrumentManager instances<a class="headerlink" href="#connecting-to-instrumentmanager-instances" title="Permalink to this headline">¶</a></h2>
<p>On instantiation, InstrumentControl will attempt to connect to a local
InstrumentManager instance. Connections to InstrumentManager instances on remote
machines can be added or removed using <tt class="xref py py-func docutils literal"><span class="pre">InstrumentControl.addManager()</span></tt> and
<tt class="xref py py-func docutils literal"><span class="pre">InstrumentControl.removeManager()</span></tt>, respectively.</p>
<p>When an InstrumentManager is added using <tt class="xref py py-func docutils literal"><span class="pre">InstrumentControl.addManager()</span></tt>,
all of the remote resources are cached by an internal call to
<tt class="xref py py-func docutils literal"><span class="pre">InstrumentControl.refreshManager()</span></tt>. Cached resources are indexed by their
Unique Resource Identifier (UUID).</p>
<p>If an <tt class="xref py py-class docutils literal"><span class="pre">InstrumentManager</span></tt> instance is not already running, you can start
one using <tt class="xref py py-func docutils literal"><span class="pre">startWaitManager()</span></tt> or <tt class="xref py py-func docutils literal"><span class="pre">startManager()</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">instr</span><span class="o">.</span><span class="n">startWaitManager</span><span class="p">()</span>
</pre></div>
</div>
<p>By default, InstrumentControl will attempt to connect to a local instance of
InstrumentManager. To connect to an InstrumentManager instance on another host:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">instr</span><span class="o">.</span><span class="n">addManager</span><span class="p">(</span><span class="s">&#39;192.168.0.1&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>InstrumentControl can also resolve hostnames:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">instr</span><span class="o">.</span><span class="n">addManager</span><span class="p">(</span><span class="s">&#39;kkennedy&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="connecting-to-instruments">
<h2>Connecting to Instruments<a class="headerlink" href="#connecting-to-instruments" title="Permalink to this headline">¶</a></h2>
<a class="reference internal image-reference" href="_images/instruments.png"><img alt="_images/instruments.png" src="_images/instruments.png" style="width: 565.0px; height: 260.0px;" /></a>
<p>Instruments are a local instance of a Model that is running on a remote
InstrumentManager instance. They are connected using the <tt class="xref py py-mod docutils literal"><span class="pre">common.Rpc</span></tt>
Library which handles all communication to the Model. From a programming
standpoint, Instruments are Python objects with the same attributes and methods
as the remote Model. They behave exactly as if they were local, but with a
little bit of latency as the functions are called using Remote Procedure Call
(RPC) over a TCP/IP socket.</p>
<p>InstrumentControl can connect to any instrument on any machine that has been
added using <tt class="xref py py-func docutils literal"><span class="pre">InstrumentControl.addManager()</span></tt>. You can find instruments by:</p>
<blockquote>
<div><ul class="simple">
<li>Type</li>
<li>Model Number</li>
<li>Serial Number</li>
</ul>
</div></blockquote>
<p>Looking up instruments by Type and Model Number may return multiple instruments
if there are many devices connected. In these cases, InstrumentControl will
return a list of devices that match. The programmer will have to use other
logic to determine which device to use. The easiest way to deal with this
situation is to identify a device by serial number.</p>
<p>To connect to instruments by type:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">scope</span> <span class="o">=</span> <span class="n">instr</span><span class="o">.</span><span class="n">getInstrument_type</span><span class="p">(</span><span class="s">&#39;Oscilloscope&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>To connect to instruments by Model number:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">smu</span> <span class="o">=</span> <span class="n">instr</span><span class="o">.</span><span class="n">getInstrument_model</span><span class="p">(</span><span class="s">&#39;B2902A&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>To connect to instruments by Serial number:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">dev</span> <span class="o">=</span> <span class="n">instr</span><span class="o">.</span><span class="n">getInstrument_serial</span><span class="p">(</span><span class="s">&#39;12345&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>To get a list of all instruments:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nb">all</span> <span class="o">=</span> <span class="n">instr</span><span class="o">.</span><span class="n">getInstrument_list</span><span class="p">()</span>
</pre></div>
</div>
<p>For documentation on the use of each instrument, see <a class="reference internal" href="supported_instruments.html"><em>Supported Instruments</em></a></p>
</div>
<div class="section" id="manually-managing-resources">
<h2>Manually Managing Resources<a class="headerlink" href="#manually-managing-resources" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is an experimental feature and has not been well tested, since there
are no devices currently that would need this support. Its possible it won&#8217;t
work at all. This section should give you an idea of how it will work...
someday.</p>
</div>
<p>The ability to manage resources is dependent on the nature of a controller.
Most controllers accessed a fixed set of system resources that are known.
A serial controller is an example of this, as the system only allows connection
to a known COM port and provides a list of available ports. Some controllers
may not always be aware of available resources. For example, if a controller
interfaces with a CAN bus, it may need additional information like a device
address in order to establish communication. It is not always practical to scan
through the entirety of possible device addresses to find a device.</p>
<p>For controllers that support manually adding resources:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">InstrumentControl</span> <span class="kn">import</span> <span class="n">InstrumentControl</span>
<span class="n">instr</span> <span class="o">=</span> <span class="n">InstrumentControl</span><span class="p">()</span>

<span class="n">new_uuid</span> <span class="o">=</span> <span class="n">instr</span><span class="o">.</span><span class="n">addResource</span><span class="p">(</span><span class="s">&#39;c_CAN&#39;</span><span class="p">,</span> <span class="s">&#39;ACME&#39;</span><span class="p">,</span> <span class="s">&#39;ABC 2000&#39;</span><span class="p">)</span>

<span class="c"># Refresh the resources list to find the new resource</span>
<span class="n">instr</span><span class="o">.</span><span class="n">refreshManager</span><span class="p">()</span>

<span class="n">widget</span> <span class="o">=</span> <span class="n">instr</span><span class="o">.</span><span class="n">getInstrument_model</span><span class="p">(</span><span class="s">&#39;ABC 2000&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>To destroy a resource, provide the Resource UUID:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">instr</span><span class="o">.</span><span class="n">destroyResource</span><span class="p">(</span><span class="s">&#39;c_CAN&#39;</span><span class="p">,</span> <span class="s">&#39;360ba14f-19be-11e4-95bf-a0481c94faff&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="loading-and-unloading-models">
<h2>Loading and Unloading Models<a class="headerlink" href="#loading-and-unloading-models" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is an experimental feature and has not been well tested, since there
are no devices currently that would need this support. Its possible it won&#8217;t
work at all. This section should give you an idea of how it will work...
someday.</p>
</div>
<p>In some cases, it may be useful to specify the Model that is loaded for a given
resource. If there are multiple models that are compatible with a device, or if
you wish to test experimental code, this is a useful feature.</p>
<p>To load a Model for a resource, you must first unload any existing Model:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">instr</span><span class="o">.</span><span class="n">unloadModel</span><span class="p">(</span><span class="s">&#39;360ba14f-19be-11e4-95bf-a0481c94faff&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Then specify a package name and class name:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">instr</span><span class="o">.</span><span class="n">loadModel</span><span class="p">(</span><span class="s">&#39;360ba14f-19be-11e4-95bf-a0481c94faff&#39;</span><span class="p">,</span> <span class="s">&#39;models.Tektronix.Oscilloscope.m_DigitalPhosphor&#39;</span><span class="p">,</span> <span class="s">&#39;m_DigitalPhosphor&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>For more details, see <tt class="xref py py-func docutils literal"><span class="pre">InstrumentControl.unloadModel()</span></tt> and
<tt class="xref py py-func docutils literal"><span class="pre">InstrumentControl.loadModel()</span></tt></p>
</div>
<div class="section" id="api-usage">
<h2>API Usage<a class="headerlink" href="#api-usage" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">InstrumentControl API</a><ul>
<li><a class="reference internal" href="#importing-instrumentcontrol">Importing InstrumentControl</a></li>
<li><a class="reference internal" href="#connecting-to-instrumentmanager-instances">Connecting to InstrumentManager instances</a></li>
<li><a class="reference internal" href="#connecting-to-instruments">Connecting to Instruments</a></li>
<li><a class="reference internal" href="#manually-managing-resources">Manually Managing Resources</a></li>
<li><a class="reference internal" href="#loading-and-unloading-models">Loading and Unloading Models</a></li>
<li><a class="reference internal" href="#api-usage">API Usage</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Lab Instrument Control and Automation Framework</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="supported_instruments.html"
                        title="next chapter">Supported Instruments (Models)</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/api.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="supported_instruments.html" title="Supported Instruments (Models)"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Lab Instrument Control and Automation Framework"
             >previous</a> |</li>
        <li><a href="index.html">Lab Instrument Control and Automation Framework 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, KKENNEDY.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>